{
    "swagger": "2.0",
    "info": {
        "description": "This is the API of the ClusterIQ cloud inventory software",
        "title": "ClusterIQ API",
        "contact": {
            "name": "ClusterIQ Team",
            "email": "vbelouso@redhat.com nnaamneh@redhat.com avillega@redhat.com"
        },
        "license": {
            "name": "Apache 2.0",
            "url": "http://www.apache.org/licenses/LICENSE-2.0.html"
        },
        "version": "1.0"
    },
    "host": "localhost:8080",
    "basePath": "/api/v1",
    "paths": {
        "/accounts/": {
            "get": {
                "description": "Returns a list of Accounts with a single Account filtered by Name",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Accounts"
                ],
                "summary": "Obtain every Account",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/cmd_api.AccountListResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            },
            "post": {
                "description": "Receives and write into the DB the information for a new Account",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Accounts"
                ],
                "summary": "Creates a new Account in the inventory",
                "parameters": [
                    {
                        "format": "email",
                        "description": "New Account to be added",
                        "name": "account",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Account"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/accounts/:account_name": {
            "get": {
                "description": "Returns a list of Accounts with a single Account filtered by Name",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Accounts"
                ],
                "summary": "Obtain a single Account by its Name",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/cmd_api.AccountListResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            },
            "delete": {
                "description": "Deletes an Account present in the inventory by its Name",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Accounts"
                ],
                "summary": "Deletes an Account in the inventory",
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            },
            "patch": {
                "description": "Receives and patch into the DB the information for an existing Account",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Accounts"
                ],
                "summary": "Patches an Account in the inventory",
                "parameters": [
                    {
                        "description": "Account to be modified",
                        "name": "Account",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Account"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/accounts/:account_name/clusters": {
            "get": {
                "description": "Returns a list of Clusters which belongs to an Account given by Name",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Accounts"
                ],
                "summary": "Obtain Cluster list on an Account",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/cmd_api.AccountListResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/clusters/": {
            "get": {
                "description": "Returns a list of Clusters with a single instance filtered by Name",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Clusters"
                ],
                "summary": "Obtain every Cluster",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/cmd_api.ClusterListResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            },
            "post": {
                "description": "Receives and write into the DB the information for a new Cluster",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Clusters"
                ],
                "summary": "Creates a new Cluster in the inventory",
                "parameters": [
                    {
                        "description": "New Cluster to be added",
                        "name": "cluster",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Cluster"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/clusters/:cluster_name": {
            "get": {
                "description": "Returns a list of Clusters with a single Cluster filtered by Name",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Clusters"
                ],
                "summary": "Obtain a single Cluster by its Name",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/cmd_api.ClusterListResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            },
            "delete": {
                "description": "Deletes a Cluster present in the inventory by its Name",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Clusters"
                ],
                "summary": "Deletes a Cluster in the inventory",
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            },
            "patch": {
                "description": "Receives and patch into the DB the information for an existing Cluster",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Clusters"
                ],
                "summary": "Patches a Cluster in the inventory",
                "parameters": [
                    {
                        "description": "Cluster to be modified",
                        "name": "instance",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Cluster"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/clusters/:cluster_name/instances": {
            "get": {
                "description": "Returns a list of Instances belonging to an Cluster given by Name",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Clusters"
                ],
                "summary": "Obtain Instances list belonging to a Cluster",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/cmd_api.InstanceListResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/instances/": {
            "get": {
                "description": "Returns a list of Instances with every Instance in the inventory",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Instances"
                ],
                "summary": "Obtain every Instance",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/cmd_api.InstanceListResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            },
            "post": {
                "description": "Receives and write into the DB the information for a new Instance",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Instances"
                ],
                "summary": "Creates a new Instance in the inventory",
                "parameters": [
                    {
                        "description": "New Instance to be added",
                        "name": "instance",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Instance"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/instances/:instance_id": {
            "get": {
                "description": "Returns a list of Instances with a single Instance filtered by ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Instances"
                ],
                "summary": "Obtain a single Instance by its ID",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/cmd_api.InstanceListResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            },
            "delete": {
                "description": "Deletes an Instance present in the inventory by its ID",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Instances"
                ],
                "summary": "Deletes an Instance in the inventory",
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            },
            "patch": {
                "description": "Receives and patch into the DB the information for an existing Instance",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Instances"
                ],
                "summary": "Patches an Instance in the inventory",
                "parameters": [
                    {
                        "description": "Instance to be modified",
                        "name": "instance",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Instance"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK"
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        }
    },
    "definitions": {
        "cmd_api.AccountListResponse": {
            "type": "object",
            "properties": {
                "accounts": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Account"
                    }
                },
                "count": {
                    "type": "integer"
                }
            }
        },
        "cmd_api.ClusterListResponse": {
            "type": "object",
            "properties": {
                "clusters": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Cluster"
                    }
                },
                "count": {
                    "type": "integer"
                }
            }
        },
        "cmd_api.InstanceListResponse": {
            "type": "object",
            "properties": {
                "count": {
                    "type": "integer"
                },
                "instances": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Instance"
                    }
                }
            }
        },
        "github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Account": {
            "type": "object",
            "properties": {
                "clusters": {
                    "description": "List of clusters deployed on this account indexed by Cluster's name",
                    "type": "object",
                    "additionalProperties": {
                        "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Cluster"
                    }
                },
                "name": {
                    "description": "Account's name. It's considered as an uniq key. Two accounts with same\nname can't belong to same Inventory",
                    "type": "string"
                },
                "provider": {
                    "description": "Infrastructure provider identifier.",
                    "allOf": [
                        {
                            "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.CloudProvider"
                        }
                    ]
                }
            }
        },
        "github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.CloudProvider": {
            "type": "string",
            "enum": [
                "AWS"
            ],
            "x-enum-varnames": [
                "AWSProvider"
            ]
        },
        "github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Cluster": {
            "type": "object",
            "properties": {
                "accountName": {
                    "description": "Account name which this cluster belongs to",
                    "type": "string"
                },
                "consoleLink": {
                    "description": "Openshift Console URL. Might not be accesible if its protected",
                    "type": "string"
                },
                "instances": {
                    "description": "Cluster's instance (nodes) lists",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Instance"
                    }
                },
                "name": {
                    "description": "Cluster's Name. Must be unique per Account",
                    "type": "string"
                },
                "provider": {
                    "description": "Infrastructure provider identifier.",
                    "allOf": [
                        {
                            "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.CloudProvider"
                        }
                    ]
                },
                "region": {
                    "description": "The region of the infrastructure provider in which the cluster is deployed",
                    "type": "string"
                },
                "status": {
                    "description": "Defines the status of the cluster if its infrastructure is running or not",
                    "allOf": [
                        {
                            "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.InstanceState"
                        }
                    ]
                }
            }
        },
        "github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Instance": {
            "type": "object",
            "properties": {
                "clusterName": {
                    "description": "ClusterName",
                    "type": "string"
                },
                "id": {
                    "description": "Uniq Identifier of the instance",
                    "type": "string"
                },
                "instanceType": {
                    "description": "Instance type/size/flavour",
                    "type": "string"
                },
                "name": {
                    "description": "Instance Name. In some Cloud Providers, the name is managed as a Tag",
                    "type": "string"
                },
                "provider": {
                    "description": "Instance provider (public/private cloud provider)",
                    "allOf": [
                        {
                            "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.CloudProvider"
                        }
                    ]
                },
                "region": {
                    "description": "Region/Availability Zone in which the instance is running on",
                    "type": "string"
                },
                "state": {
                    "description": "Instance Status",
                    "allOf": [
                        {
                            "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.InstanceState"
                        }
                    ]
                },
                "tags": {
                    "description": "Instance Tags as key-value array",
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Tag"
                    }
                }
            }
        },
        "github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.InstanceState": {
            "type": "string",
            "enum": [
                "Running"
            ],
            "x-enum-varnames": [
                "Running"
            ]
        },
        "github_com_RHEcosystemAppEng_cluster-iq_internal_inventory.Tag": {
            "type": "object",
            "properties": {
                "key": {
                    "description": "Tag's key",
                    "type": "string"
                },
                "value": {
                    "description": "Tag's Value",
                    "type": "string"
                }
            }
        }
    },
    "securityDefinitions": {
        "BasicAuth": {
            "type": "basic"
        }
    },
    "externalDocs": {
        "description": "OpenAPI",
        "url": "https://swagger.io/resources/open-api/"
    }
}